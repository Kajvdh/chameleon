!function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)r.d(t,i,function(n){return e[n]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=0)}([function(e,n,r){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return o(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}r.r(n);var u="theme_dark_fluid",a={SIM_RESOLUTION:128,DYE_RESOLUTION:1024,DENSITY_DISSIPATION:2,VELOCITY_DISSIPATION:.1,PRESSURE:.28,PRESSURE_ITERATIONS:8,CURL:30,SPLAT_RADIUS:.25,SPLAT_FORCE:6e3,SHADING:!0,COLORFUL:!0,COLOR_UPDATE_SPEED:10,PAUSED:!1,BLOOM:!1,BLOOM_ITERATIONS:8,BLOOM_RESOLUTION:256,BLOOM_INTENSITY:.8,BLOOM_THRESHOLD:.6,BLOOM_SOFT_KNEE:.7,SUNRAYS:!1,SUNRAYS_RESOLUTION:196,SUNRAYS_WEIGHT:1};function l(){!function e(n,r){_.each(n,(function(n,o){var a,l=[].concat(i(r),[o]),f=l.join(".");"object"!==t(n)||_.isArray(n)?"undefined"==(a=f,typeof kiwi.state.getSetting(["settings",u,a].join(".")))&&function(e,n){kiwi.state.setSetting(["settings",u,e].join("."),n)}(f,n):e(n,l)}))}(a,[])}function f(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function c(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function v(e,n,r){return n&&c(e.prototype,n),r&&c(e,r),e}var m=null,s={SIM_RESOLUTION:128,DYE_RESOLUTION:1024,DENSITY_DISSIPATION:2,VELOCITY_DISSIPATION:.1,PRESSURE:.28,PRESSURE_ITERATIONS:8,CURL:30,SPLAT_RADIUS:.25,SPLAT_FORCE:6e3,SHADING:!0,COLORFUL:!0,COLOR_UPDATE_SPEED:10,PAUSED:!1,BLOOM:!1,BLOOM_ITERATIONS:8,BLOOM_RESOLUTION:256,BLOOM_INTENSITY:.8,BLOOM_THRESHOLD:.6,BLOOM_SOFT_KNEE:.7,SUNRAYS:!1,SUNRAYS_RESOLUTION:196,SUNRAYS_WEIGHT:1};var E=[],h=[];E.push(new function(){this.id=-1,this.texcoordX=0,this.texcoordY=0,this.prevTexcoordX=0,this.prevTexcoordY=0,this.deltaX=0,this.deltaY=0,this.down=!1,this.moved=!1,this.color=s.COLORFUL?we():s.POINTER_COLOR.getRandom()});var R,g,T,d,x,S,p,A,D=null,y=null,U=null,O=null,I=null,B=null,F=null,b=null,N=null,w=null,L=null,C=null,M=null,P=null,G=null,X=null,z=null,V=null,Y=null,k=null,H=null,Q=[],j=null,K=null,J=null,W=null,Z=null,q=null,$=null,ee=null,ne=null,re=null,te=null,ie=null,oe=null,ue=null,ae=null,le=null,fe=null,ce=null,ve=Date.now(),me=0,se=null,Ee=!1;function he(){return Ee}function Re(e,n){m=e,s=n||s,Ee=!0,Fe(),function(){var e,n,r={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1},t=!!(D=m.getContext("webgl2",r));t||(D=m.getContext("webgl",r)||m.getContext("experimental-webgl",r));t?(D.getExtension("EXT_color_buffer_float"),n=D.getExtension("OES_texture_float_linear")):(e=D.getExtension("OES_texture_half_float"),n=D.getExtension("OES_texture_half_float_linear"));D.clearColor(0,0,0,1);var i,o,u,a=t?D.HALF_FLOAT:e.HALF_FLOAT_OES;t?(i=Te(D.RGBA16F,D.RGBA,a),o=Te(D.RG16F,D.RG,a),u=Te(D.R16F,D.RED,a)):(i=Te(D.RGBA,D.RGBA,a),o=Te(D.RGBA,D.RGBA,a),u=Te(D.RGBA,D.RGBA,a));y={formatRGBA:i,formatRG:o,formatR:u,halfFloatTexType:a,supportLinearFiltering:n}}(),y.supportLinearFiltering||(s.DYE_RESOLUTION=512,s.SHADING=!1,s.BLOOM=!1,s.SUNRAYS=!1),D.bindBuffer(D.ARRAY_BUFFER,D.createBuffer()),D.bufferData(D.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),D.STATIC_DRAW),D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,D.createBuffer()),D.bufferData(D.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),D.STATIC_DRAW),D.vertexAttribPointer(0,2,D.FLOAT,!1,0,0),D.enableVertexAttribArray(0),se=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==e?(D.viewport(0,0,D.drawingBufferWidth,D.drawingBufferHeight),D.bindFramebuffer(D.FRAMEBUFFER,null)):(D.viewport(0,0,e.width,e.height),D.bindFramebuffer(D.FRAMEBUFFER,e.fbo)),n&&(D.clearColor(0,0,0,1),D.clear(D.COLOR_BUFFER_BIT)),D.drawElements(D.TRIANGLES,6,D.UNSIGNED_SHORT,0)},document.addEventListener("mousemove",ge),U=Ae(D.VERTEX_SHADER,"\n        precision highp float;\n\n        attribute vec2 aPosition;\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform vec2 texelSize;\n\n        void main () {\n            vUv = aPosition * 0.5 + 0.5;\n            vL = vUv - vec2(texelSize.x, 0.0);\n            vR = vUv + vec2(texelSize.x, 0.0);\n            vT = vUv + vec2(0.0, texelSize.y);\n            vB = vUv - vec2(0.0, texelSize.y);\n            gl_Position = vec4(aPosition, 0.0, 1.0);\n        }\n    "),O=Ae(D.VERTEX_SHADER,"\n        precision highp float;\n\n        attribute vec2 aPosition;\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        uniform vec2 texelSize;\n\n        void main () {\n            vUv = aPosition * 0.5 + 0.5;\n            float offset = 1.33333333;\n            vL = vUv - texelSize * offset;\n            vR = vUv + texelSize * offset;\n            gl_Position = vec4(aPosition, 0.0, 1.0);\n        }\n    "),I=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        uniform sampler2D uTexture;\n\n        void main () {\n            vec4 sum = texture2D(uTexture, vUv) * 0.29411764;\n            sum += texture2D(uTexture, vL) * 0.35294117;\n            sum += texture2D(uTexture, vR) * 0.35294117;\n            gl_FragColor = sum;\n        }\n    "),B=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying highp vec2 vUv;\n        uniform sampler2D uTexture;\n\n        void main () {\n            gl_FragColor = texture2D(uTexture, vUv);\n        }\n    "),F=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying highp vec2 vUv;\n        uniform sampler2D uTexture;\n        uniform float value;\n\n        void main () {\n            gl_FragColor = value * texture2D(uTexture, vUv);\n        }\n    "),b=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n\n        uniform vec4 color;\n\n        void main () {\n            gl_FragColor = color;\n        }\n    "),N="\n        precision highp float;\n        precision highp sampler2D;\n\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform sampler2D uTexture;\n        uniform sampler2D uBloom;\n        uniform sampler2D uSunrays;\n        uniform sampler2D uDithering;\n        uniform vec2 ditherScale;\n        uniform vec2 texelSize;\n\n        vec3 linearToGamma (vec3 color) {\n            color = max(color, vec3(0));\n            return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));\n        }\n\n        void main () {\n            vec3 c = texture2D(uTexture, vUv).rgb;\n\n        #ifdef SHADING\n            vec3 lc = texture2D(uTexture, vL).rgb;\n            vec3 rc = texture2D(uTexture, vR).rgb;\n            vec3 tc = texture2D(uTexture, vT).rgb;\n            vec3 bc = texture2D(uTexture, vB).rgb;\n\n            float dx = length(rc) - length(lc);\n            float dy = length(tc) - length(bc);\n\n            vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n            vec3 l = vec3(0.0, 0.0, 1.0);\n\n            float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n            c *= diffuse;\n        #endif\n\n        #ifdef BLOOM\n            vec3 bloom = texture2D(uBloom, vUv).rgb;\n        #endif\n\n        #ifdef SUNRAYS\n            float sunrays = texture2D(uSunrays, vUv).r;\n            c *= sunrays;\n        #ifdef BLOOM\n            bloom *= sunrays;\n        #endif\n        #endif\n\n        #ifdef BLOOM\n            float noise = texture2D(uDithering, vUv * ditherScale).r;\n            noise = noise * 2.0 - 1.0;\n            bloom += noise / 255.0;\n            bloom = linearToGamma(bloom);\n            c += bloom;\n        #endif\n\n            float a = max(c.r, max(c.g, c.b));\n            gl_FragColor = vec4(c, a);\n        }\n    ",w=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying vec2 vUv;\n        uniform sampler2D uTexture;\n        uniform vec3 curve;\n        uniform float threshold;\n\n        void main () {\n            vec3 c = texture2D(uTexture, vUv).rgb;\n            float br = max(c.r, max(c.g, c.b));\n            float rq = clamp(br - curve.x, 0.0, curve.y);\n            rq = curve.z * rq * rq;\n            c *= max(rq, br - threshold) / max(br, 0.0001);\n            gl_FragColor = vec4(c, 0.0);\n        }\n    "),L=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform sampler2D uTexture;\n\n        void main () {\n            vec4 sum = vec4(0.0);\n            sum += texture2D(uTexture, vL);\n            sum += texture2D(uTexture, vR);\n            sum += texture2D(uTexture, vT);\n            sum += texture2D(uTexture, vB);\n            sum *= 0.25;\n            gl_FragColor = sum;\n        }\n    "),C=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform sampler2D uTexture;\n        uniform float intensity;\n\n        void main () {\n            vec4 sum = vec4(0.0);\n            sum += texture2D(uTexture, vL);\n            sum += texture2D(uTexture, vR);\n            sum += texture2D(uTexture, vT);\n            sum += texture2D(uTexture, vB);\n            sum *= 0.25;\n            gl_FragColor = sum * intensity;\n        }\n    "),M=Ae(D.FRAGMENT_SHADER,"\n        precision highp float;\n        precision highp sampler2D;\n\n        varying vec2 vUv;\n        uniform sampler2D uTexture;\n\n        void main () {\n            vec4 c = texture2D(uTexture, vUv);\n            float br = max(c.r, max(c.g, c.b));\n            c.a = 1.0 - min(max(br * 20.0, 0.0), 0.8);\n            gl_FragColor = c;\n        }\n    "),P=Ae(D.FRAGMENT_SHADER,"\n        precision highp float;\n        precision highp sampler2D;\n\n        varying vec2 vUv;\n        uniform sampler2D uTexture;\n        uniform float weight;\n\n        #define ITERATIONS 16\n\n        void main () {\n            float Density = 0.3;\n            float Decay = 0.95;\n            float Exposure = 0.7;\n\n            vec2 coord = vUv;\n            vec2 dir = vUv - 0.5;\n\n            dir *= 1.0 / float(ITERATIONS) * Density;\n            float illuminationDecay = 1.0;\n\n            float color = texture2D(uTexture, vUv).a;\n\n            for (int i = 0; i < ITERATIONS; i++)\n            {\n                coord -= dir;\n                float col = texture2D(uTexture, coord).a;\n                color += col * illuminationDecay * weight;\n                illuminationDecay *= Decay;\n            }\n\n            gl_FragColor = vec4(color * Exposure, 0.0, 0.0, 1.0);\n        }\n    "),G=Ae(D.FRAGMENT_SHADER,"\n        precision highp float;\n        precision highp sampler2D;\n\n        varying vec2 vUv;\n        uniform sampler2D uTarget;\n        uniform float aspectRatio;\n        uniform vec3 color;\n        uniform vec2 point;\n        uniform float radius;\n\n        void main () {\n            vec2 p = vUv - point.xy;\n            p.x *= aspectRatio;\n            vec3 splat = exp(-dot(p, p) / radius) * color;\n            vec3 base = texture2D(uTarget, vUv).xyz;\n            gl_FragColor = vec4(base + splat, 1.0);\n        }\n    "),X=Ae(D.FRAGMENT_SHADER,"\n        precision highp float;\n        precision highp sampler2D;\n\n        varying vec2 vUv;\n        uniform sampler2D uVelocity;\n        uniform sampler2D uSource;\n        uniform vec2 texelSize;\n        uniform vec2 dyeTexelSize;\n        uniform float dt;\n        uniform float dissipation;\n\n        vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n            vec2 st = uv / tsize - 0.5;\n\n            vec2 iuv = floor(st);\n            vec2 fuv = fract(st);\n\n            vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n            vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n            vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n            vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n\n            return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n        }\n\n        void main () {\n        #ifdef MANUAL_FILTERING\n            vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n            vec4 result = bilerp(uSource, coord, dyeTexelSize);\n        #else\n            vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n            vec4 result = texture2D(uSource, coord);\n        #endif\n            float decay = 1.0 + dissipation * dt;\n            gl_FragColor = result / decay;\n        }",y.supportLinearFiltering?null:["MANUAL_FILTERING"]),z=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uVelocity, vL).x;\n            float R = texture2D(uVelocity, vR).x;\n            float T = texture2D(uVelocity, vT).y;\n            float B = texture2D(uVelocity, vB).y;\n\n            vec2 C = texture2D(uVelocity, vUv).xy;\n            if (vL.x < 0.0) { L = -C.x; }\n            if (vR.x > 1.0) { R = -C.x; }\n            if (vT.y > 1.0) { T = -C.y; }\n            if (vB.y < 0.0) { B = -C.y; }\n\n            float div = 0.5 * (R - L + T - B);\n            gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n        }\n    "),V=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uVelocity, vL).y;\n            float R = texture2D(uVelocity, vR).y;\n            float T = texture2D(uVelocity, vT).x;\n            float B = texture2D(uVelocity, vB).x;\n            float vorticity = R - L - T + B;\n            gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n        }\n    "),Y=Ae(D.FRAGMENT_SHADER,"\n        precision highp float;\n        precision highp sampler2D;\n\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform sampler2D uVelocity;\n        uniform sampler2D uCurl;\n        uniform float curl;\n        uniform float dt;\n\n        void main () {\n            float L = texture2D(uCurl, vL).x;\n            float R = texture2D(uCurl, vR).x;\n            float T = texture2D(uCurl, vT).x;\n            float B = texture2D(uCurl, vB).x;\n            float C = texture2D(uCurl, vUv).x;\n\n            vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n            force /= length(force) + 0.0001;\n            force *= curl * C;\n            force.y *= -1.0;\n\n            vec2 velocity = texture2D(uVelocity, vUv).xy;\n            velocity += force * dt;\n            velocity = min(max(velocity, -1000.0), 1000.0);\n            gl_FragColor = vec4(velocity, 0.0, 1.0);\n        }\n    "),k=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uPressure;\n        uniform sampler2D uDivergence;\n\n        void main () {\n            float L = texture2D(uPressure, vL).x;\n            float R = texture2D(uPressure, vR).x;\n            float T = texture2D(uPressure, vT).x;\n            float B = texture2D(uPressure, vB).x;\n            float C = texture2D(uPressure, vUv).x;\n            float divergence = texture2D(uDivergence, vUv).x;\n            float pressure = (L + R + B + T - divergence) * 0.25;\n            gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n        }\n    "),H=Ae(D.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uPressure;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uPressure, vL).x;\n            float R = texture2D(uPressure, vR).x;\n            float T = texture2D(uPressure, vT).x;\n            float B = texture2D(uPressure, vB).x;\n            vec2 velocity = texture2D(uVelocity, vUv).xy;\n            velocity.xy -= vec2(R - L, T - B);\n            gl_FragColor = vec4(velocity, 0.0, 1.0);\n        }\n    "),j=function(){var e=D.createTexture();D.bindTexture(D.TEXTURE_2D,e),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.LINEAR),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.LINEAR),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.REPEAT),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.REPEAT),D.texImage2D(D.TEXTURE_2D,0,D.RGB,1,1,0,D.RGB,D.UNSIGNED_BYTE,new Uint8Array([255,255,255]));var n={texture:e,width:1,height:1,attach:function(n){return D.activeTexture(D.TEXTURE0+n),D.bindTexture(D.TEXTURE_2D,e),n}},r=new Image;return r.src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAbkklEQVR4nD3bZdhVVRMG4KVY2Ah2t2Jid3diYRd2d7fYYAvYIAaCCioo2I2BYHd3d+f43XNd870/99l7rYknZu1z3rbmmmvGb7/9FmPHjo077rgjlltuuejbt2/stttucfbZZ8fxxx8fq622Whx00EExfvz4mHXWWeONN96Iyy+/PPbZZ5/4888/Y7PNNsv7Pv744+jQoUNstdVW8cUXX8TAgQNjscUWix9//DEOPPDAWGihheKkk06KnXfeOZ5++umYd95547PPPov77rsv/v3333juuefi0ksvjammmiq23XbbOOuss+LXX3+NJ554ImN7//33Y+WVV46ddtopzjjjjBgyZEh069YtRo0aFX369Mm9V1pppbjxxhszzmeffTamnHLKjOfxxx+PiSaaKAYMGJD3W8O6bejQofnwTDPNFKecckom6k9wL774Ymy++ebxyCOPxJ133hnnn39+3HzzzTHFFFPEuuuuG6effnrcfffduZnAl1hiiXjooYfCmmuttVYmIrlNNtkkWmu54XXXXZefXXLJJXHrrbfGvvvum4kKfPfdd8/1Pv/88xg0aFAcccQRMc8888SGG24YE044YXz77bd5/f77749JJpkkfvrpp3jzzTdjzjnnzHjE+fPPP2fxrC++33//Pff54IMPcq+vvvoqpp9++nzuqKOOivb1119nFT101VVXZRctNs0008RNN92UDyjOkksuGT169IhjjjkmA3nsscdihx12yEDeeeedrPp+++0XXbp0yQIee+yxGcRLL70Up512Wmy33XZhL5svs8wy8csvv0SnTp0yuWuvvTb3mHTSSePkk0+ORRZZJNZYY4148MEHM9Bdd901Tj311JhxxhkTJYsvvngcdthhcfHFF8c222wTe++9d3zyyScZG5Ttv//+8e6772ah5QatimRtz3puxRVXjMknnzyajqnMK6+8khDq2rVrdkonXNfZCSaYIN577734+++/Y5VVVsmu6CR4q/iqq64azz//fJx55pmx/fbbx5NPPhnzzz9/rLDCCpno7LPPHsOGDctADj/88Ezs5ZdfTsSNGDEiC/r6669nUUEeCmeZZZb4/vvvE01LL710NgeNtthii/jjjz9ittlmy/vFM3z48Ljiiiuic+fOGQe6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",r.onload=function(){n.width=r.width,n.height=r.height,D.bindTexture(D.TEXTURE_2D,e),D.texImage2D(D.TEXTURE_2D,0,D.RGB,D.RGB,D.UNSIGNED_BYTE,r)},n}(),K=new xe(O,I),J=new xe(U,B),W=new xe(U,F),Z=new xe(U,b),q=new xe(U,w),$=new xe(U,L),ee=new xe(U,C),ne=new xe(U,M),re=new xe(U,P),te=new xe(U,G),ie=new xe(U,X),oe=new xe(U,z),ue=new xe(U,V),ae=new xe(U,Y),le=new xe(U,k),fe=new xe(U,H),ce=new de(U,N),Ie(),De(),be(parseInt(20*Math.random(),10)+5),Be()}function ge(e){!function(e,n,r){e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.texcoordX=n/m.width,e.texcoordY=1-r/m.height,e.deltaX=function(e){var n=e,r=m.width/m.height;r<1&&(n*=r);return n}(e.texcoordX-e.prevTexcoordX),e.deltaY=function(e){var n=e,r=m.width/m.height;r>1&&(n/=r);return n}(e.texcoordY-e.prevTexcoordY),e.moved=Math.abs(e.deltaX)>0||Math.abs(e.deltaY)>0}(E[0],Ce(e.clientX),Ce(e.clientY))}function Te(e,n,r){if(!function(e,n,r){var t=D.createTexture();D.bindTexture(D.TEXTURE_2D,t),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.NEAREST),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.NEAREST),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE),D.texImage2D(D.TEXTURE_2D,0,e,4,4,0,n,r,null);var i=D.createFramebuffer();return D.bindFramebuffer(D.FRAMEBUFFER,i),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,t,0),D.checkFramebufferStatus(D.FRAMEBUFFER)===D.FRAMEBUFFER_COMPLETE}(e,n,r))switch(e){case D.R16F:return Te(D.RG16F,D.RG,r);case D.RG16F:return Te(D.RGBA16F,D.RGBA,r);default:return null}return{internalFormat:e,format:n}}/Mobi|Android/i.test(navigator.userAgent)&&(s.DYE_RESOLUTION=512);var de=function(){function e(n,r){f(this,e),this.vertexShader=n,this.fragmentShaderSource=r,this.programs=[],this.activeProgram=null,this.uniforms=[]}return v(e,[{key:"setKeywords",value:function(e){for(var n=0,r=0;r<e.length;r++)n+=Me(e[r]);var t=this.programs[n];if(null==t){var i=Ae(D.FRAGMENT_SHADER,this.fragmentShaderSource,e);t=Se(this.vertexShader,i),this.programs[n]=t}t!==this.activeProgram&&(this.uniforms=pe(t),this.activeProgram=t)}},{key:"bind",value:function(){D.useProgram(this.activeProgram)}}]),e}(),xe=function(){function e(n,r){f(this,e),this.uniforms={},this.program=Se(n,r),this.uniforms=pe(this.program)}return v(e,[{key:"bind",value:function(){D.useProgram(this.program)}}]),e}();function Se(e,n){var r=D.createProgram();return D.attachShader(r,e),D.attachShader(r,n),D.linkProgram(r),D.getProgramParameter(r,D.LINK_STATUS)||console.trace(D.getProgramInfoLog(r)),r}function pe(e){for(var n=[],r=D.getProgramParameter(e,D.ACTIVE_UNIFORMS),t=0;t<r;t++){var i=D.getActiveUniform(e,t).name;n[i]=D.getUniformLocation(e,i)}return n}function Ae(e,n,r){var t=function(e,n){if(null==n)return e;var r="";return n.forEach((function(e){r+="#define "+e+"\n"})),r+e}(n,r),i=D.createShader(e);return D.shaderSource(i,t),D.compileShader(i),D.getShaderParameter(i,D.COMPILE_STATUS)||console.trace(D.getShaderInfoLog(i)),i}function De(){var e=Le(s.SIM_RESOLUTION),n=Le(s.DYE_RESOLUTION),r=y.halfFloatTexType,t=y.formatRGBA,i=y.formatRG,o=y.formatR,u=y.supportLinearFiltering?D.LINEAR:D.NEAREST;D.disable(D.BLEND),R=null==R?Ue(n.width,n.height,t.internalFormat,t.format,r,u):Oe(R,n.width,n.height,t.internalFormat,t.format,r,u),g=null==g?Ue(e.width,e.height,i.internalFormat,i.format,r,u):Oe(g,e.width,e.height,i.internalFormat,i.format,r,u),T=ye(e.width,e.height,o.internalFormat,o.format,r,D.NEAREST),d=ye(e.width,e.height,o.internalFormat,o.format,r,D.NEAREST),x=Ue(e.width,e.height,o.internalFormat,o.format,r,D.NEAREST),function(){var e=Le(s.BLOOM_RESOLUTION),n=y.halfFloatTexType,r=y.formatRGBA,t=y.supportLinearFiltering?D.LINEAR:D.NEAREST;S=ye(e.width,e.height,r.internalFormat,r.format,n,t),Q.length=0;for(var i=0;i<s.BLOOM_ITERATIONS;i++){var o=e.width>>i+1,u=e.height>>i+1;if(o<2||u<2)break;var a=ye(o,u,r.internalFormat,r.format,n,t);Q.push(a)}}(),function(){var e=Le(s.SUNRAYS_RESOLUTION),n=y.halfFloatTexType,r=y.formatR,t=y.supportLinearFiltering?D.LINEAR:D.NEAREST;p=ye(e.width,e.height,r.internalFormat,r.format,n,t),A=ye(e.width,e.height,r.internalFormat,r.format,n,t)}()}function ye(e,n,r,t,i,o){D.activeTexture(D.TEXTURE0);var u=D.createTexture();D.bindTexture(D.TEXTURE_2D,u),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,o),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,o),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE),D.texImage2D(D.TEXTURE_2D,0,r,e,n,0,t,i,null);var a=D.createFramebuffer();return D.bindFramebuffer(D.FRAMEBUFFER,a),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,u,0),D.viewport(0,0,e,n),D.clear(D.COLOR_BUFFER_BIT),{texture:u,fbo:a,width:e,height:n,texelSizeX:1/e,texelSizeY:1/n,attach:function(e){return D.activeTexture(D.TEXTURE0+e),D.bindTexture(D.TEXTURE_2D,u),e}}}function Ue(e,n,r,t,i,o){var u=ye(e,n,r,t,i,o),a=ye(e,n,r,t,i,o);return{width:e,height:n,texelSizeX:u.texelSizeX,texelSizeY:u.texelSizeY,get read(){return u},set read(e){u=e},get write(){return a},set write(e){a=e},swap:function(){var e=u;u=a,a=e}}}function Oe(e,n,r,t,i,o,u){return e.width===n&&e.height===r||(e.read=function(e,n,r,t,i,o,u){var a=ye(n,r,t,i,o,u);return J.bind(),D.uniform1i(J.uniforms.uTexture,e.attach(0)),se(a),a}(e.read,n,r,t,i,o,u),e.write=ye(n,r,t,i,o,u),e.width=n,e.height=r,e.texelSizeX=1/n,e.texelSizeY=1/r),e}function Ie(){var e=[];s.SHADING&&e.push("SHADING"),s.BLOOM&&e.push("BLOOM"),s.SUNRAYS&&e.push("SUNRAYS"),ce.setKeywords(e)}function Be(){if(Ee){var e=function(){var e=Date.now(),n=(e-ve)/1e3;return n=Math.min(n,.016666),ve=e,n}();Fe()&&De(),function(e){if(!s.COLORFUL)return;(me+=e*s.COLOR_UPDATE_SPEED)>=1&&(n=me,me=0===(t=1-(r=0))?r:(n-r)%t+r,E.forEach((function(e){e.color=we()})));var n,r,t}(e),function(){h.length>0&&be(h.pop());E.forEach((function(e){var n,r,t;e.moved&&(e.moved=!1,r=(n=e).deltaX*s.SPLAT_FORCE,t=n.deltaY*s.SPLAT_FORCE,Ne(n.texcoordX,n.texcoordY,r,t,n.color))}))}(),s.PAUSED||function(e){D.disable(D.BLEND),ue.bind(),D.uniform2f(ue.uniforms.texelSize,g.texelSizeX,g.texelSizeY),D.uniform1i(ue.uniforms.uVelocity,g.read.attach(0)),se(d),ae.bind(),D.uniform2f(ae.uniforms.texelSize,g.texelSizeX,g.texelSizeY),D.uniform1i(ae.uniforms.uVelocity,g.read.attach(0)),D.uniform1i(ae.uniforms.uCurl,d.attach(1)),D.uniform1f(ae.uniforms.curl,s.CURL),D.uniform1f(ae.uniforms.dt,e),se(g.write),g.swap(),oe.bind(),D.uniform2f(oe.uniforms.texelSize,g.texelSizeX,g.texelSizeY),D.uniform1i(oe.uniforms.uVelocity,g.read.attach(0)),se(T),W.bind(),D.uniform1i(W.uniforms.uTexture,x.read.attach(0)),D.uniform1f(W.uniforms.value,s.PRESSURE),se(x.write),x.swap(),le.bind(),D.uniform2f(le.uniforms.texelSize,g.texelSizeX,g.texelSizeY),D.uniform1i(le.uniforms.uDivergence,T.attach(0));for(var n=0;n<s.PRESSURE_ITERATIONS;n++)D.uniform1i(le.uniforms.uPressure,x.read.attach(1)),se(x.write),x.swap();fe.bind(),D.uniform2f(fe.uniforms.texelSize,g.texelSizeX,g.texelSizeY),D.uniform1i(fe.uniforms.uPressure,x.read.attach(0)),D.uniform1i(fe.uniforms.uVelocity,g.read.attach(1)),se(g.write),g.swap(),ie.bind(),D.uniform2f(ie.uniforms.texelSize,g.texelSizeX,g.texelSizeY),y.supportLinearFiltering||D.uniform2f(ie.uniforms.dyeTexelSize,g.texelSizeX,g.texelSizeY);var r=g.read.attach(0);D.uniform1i(ie.uniforms.uVelocity,r),D.uniform1i(ie.uniforms.uSource,r),D.uniform1f(ie.uniforms.dt,e),D.uniform1f(ie.uniforms.dissipation,s.VELOCITY_DISSIPATION),se(g.write),g.swap(),y.supportLinearFiltering||D.uniform2f(ie.uniforms.dyeTexelSize,R.texelSizeX,R.texelSizeY);D.uniform1i(ie.uniforms.uVelocity,g.read.attach(0)),D.uniform1i(ie.uniforms.uSource,R.read.attach(1)),D.uniform1f(ie.uniforms.dissipation,s.DENSITY_DISSIPATION),se(R.write),R.swap()}(e),function(e){s.BLOOM&&function(e,n){if(Q.length<2)return;var r=n;D.disable(D.BLEND),q.bind();var t=s.BLOOM_THRESHOLD*s.BLOOM_SOFT_KNEE+1e-4,i=s.BLOOM_THRESHOLD-t,o=2*t,u=.25/t;D.uniform3f(q.uniforms.curve,i,o,u),D.uniform1f(q.uniforms.threshold,s.BLOOM_THRESHOLD),D.uniform1i(q.uniforms.uTexture,e.attach(0)),se(r),$.bind();for(var a=0;a<Q.length;a++){var l=Q[a];D.uniform2f($.uniforms.texelSize,r.texelSizeX,r.texelSizeY),D.uniform1i($.uniforms.uTexture,r.attach(0)),se(l),r=l}D.blendFunc(D.ONE,D.ONE),D.enable(D.BLEND);for(var f=Q.length-2;f>=0;f--){var c=Q[f];D.uniform2f($.uniforms.texelSize,r.texelSizeX,r.texelSizeY),D.uniform1i($.uniforms.uTexture,r.attach(0)),D.viewport(0,0,c.width,c.height),se(c),r=c}D.disable(D.BLEND),ee.bind(),D.uniform2f(ee.uniforms.texelSize,r.texelSizeX,r.texelSizeY),D.uniform1i(ee.uniforms.uTexture,r.attach(0)),D.uniform1f(ee.uniforms.intensity,s.BLOOM_INTENSITY),se(n)}(R.read,S);s.SUNRAYS&&(n=R.read,r=R.write,t=p,D.disable(D.BLEND),ne.bind(),D.uniform1i(ne.uniforms.uTexture,n.attach(0)),se(r),re.bind(),D.uniform1f(re.uniforms.weight,s.SUNRAYS_WEIGHT),D.uniform1i(re.uniforms.uTexture,r.attach(0)),se(t),function(e,n,r){K.bind();for(var t=0;t<r;t++)D.uniform2f(K.uniforms.texelSize,e.texelSizeX,0),D.uniform1i(K.uniforms.uTexture,e.attach(0)),se(n),D.uniform2f(K.uniforms.texelSize,0,e.texelSizeY),D.uniform1i(K.uniforms.uTexture,n.attach(0)),se(e)}(p,A,1));var n,r,t;D.blendFunc(D.ONE,D.ONE_MINUS_SRC_ALPHA),D.enable(D.BLEND),function(e,n){Z.bind(),D.uniform4f(Z.uniforms.color,n.r,n.g,n.b,1),se(e)}(e,(i={r:0,g:0,b:0},{r:i.r/255,g:i.g/255,b:i.b/255})),function(e){var n=null==e?D.drawingBufferWidth:e.width,r=null==e?D.drawingBufferHeight:e.height;ce.bind(),s.SHADING&&D.uniform2f(ce.uniforms.texelSize,1/n,1/r);if(D.uniform1i(ce.uniforms.uTexture,R.read.attach(0)),s.BLOOM){D.uniform1i(ce.uniforms.uBloom,S.attach(1)),D.uniform1i(ce.uniforms.uDithering,j.attach(2));var t=function(e,n,r){return{x:n/e.width,y:r/e.height}}(j,n,r);D.uniform2f(ce.uniforms.ditherScale,t.x,t.y)}s.SUNRAYS&&D.uniform1i(ce.uniforms.uSunrays,p.attach(3));se(e)}(e);var i}(null),requestAnimationFrame(Be)}}function Fe(){var e=Ce(m.clientWidth),n=Ce(m.clientHeight);return(m.width!==e||m.height!==n)&&(m.width=e,m.height=n,!0)}function be(e){for(var n=0;n<e;n++){var r=we();r.r*=10,r.g*=10,r.b*=10,Ne(Math.random(),Math.random(),1e3*(Math.random()-.5),1e3*(Math.random()-.5),r)}}function Ne(e,n,r,t,i){te.bind(),D.uniform1i(te.uniforms.uTarget,g.read.attach(0)),D.uniform1f(te.uniforms.aspectRatio,m.width/m.height),D.uniform2f(te.uniforms.point,e,n),D.uniform3f(te.uniforms.color,r,t,0),D.uniform1f(te.uniforms.radius,function(e){var n=e,r=m.width/m.height;r>1&&(n*=r);return n}(s.SPLAT_RADIUS/100)),se(g.write),g.swap(),D.uniform1i(te.uniforms.uTarget,R.read.attach(0)),D.uniform3f(te.uniforms.color,i.r,i.g,i.b),se(R.write),R.swap()}function we(){var e=function(e,n,r){var t,i,o,u,a,l,f,c;switch(u=Math.floor(6*e),l=r*(1-n),f=r*(1-(a=6*e-u)*n),c=r*(1-(1-a)*n),u%6){case 0:t=r,i=c,o=l;break;case 1:t=f,i=r,o=l;break;case 2:t=l,i=r,o=c;break;case 3:t=l,i=f,o=r;break;case 4:t=c,i=l,o=r;break;case 5:t=r,i=l,o=f}return{r:t,g:i,b:o}}(Math.random(),1,1);return e.r*=.15,e.g*=.15,e.b*=.15,e}function Le(e){var n=D.drawingBufferWidth/D.drawingBufferHeight;n<1&&(n=1/n);var r=Math.round(e),t=Math.round(e*n);return D.drawingBufferWidth>D.drawingBufferHeight?{width:t,height:r}:{width:r,height:t}}function Ce(e){var n=window.devicePixelRatio||1;return Math.floor(e*n)}function Me(e){if(0===e.length)return 0;for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return n}function Pe(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Ge(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var _e,Xe,ze=(_e=document.getElementsByTagName("script"),(Xe=_e[_e.length-1].src).substr(0,Xe.lastIndexOf("/")+1));kiwi.plugin("theme-dark-fluid",(function(e){l();var n=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Pe(Object(r),!0).forEach((function(n){Ge(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({},e.state.setting("theme_dark_fluid"));e.state.$watch("user_settings.theme_dark_fluid",(function(){for(var r=Object.keys(n),t=0;t<r.length;t++){var i=r[t],o=n[i],u=e.state.setting("theme_dark_fluid."+i);if(o!==u){if(n[i]=u,!he())return;switch(i){case"DYE_RESOLUTION":case"SIM_RESOLUTION":De();break;case"SHADING":case"BLOOM":case"SUNRAYS":Ie()}}}})),e.state.getSetting("settings.themes").push({name:"DarkFluid",url:ze+"theme-dark-fluid/theme/"});var r=document.createElement("canvas");function t(n){if(n.buffer&&e.state.getActiveBuffer()===n.buffer){var r=n.message;if(!["traffic","topic"].includes(r.type)){var t=Math.min(r.message.split(" ").length,10);t&&be(t)}}}r.style.position="absolute",r.style.top=0,r.style.right=0,r.style.bottom=0,r.style.left=0,r.style.width="100%",r.style.height="100%",r.style.zIndex="-100",r.style.backgroundColor="#000",e.on("theme.change",(function(i){"DarkFluid"===(i||e.state.setting("theme"))?(document.body.prepend(r),Re(r,n),e.on("message.new",t)):he()&&(e.off("message.new",t),Ee=!1,document.removeEventListener("mousemove",ge),D.clear(D.COLOR_BUFFER_BIT),document.body.removeChild(r))})),"DarkFluid"===e.state.setting("theme")&&e.themes.setTheme("DarkFluid")}))}]);